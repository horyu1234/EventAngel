var Horyu=window.Horyu||{};Horyu.View=window.Horyu.View||{};
Horyu.View.Lottery=function(f){var a=this;a.companyGiftTable=null;a.currentEventWinnerData=[];a.options=$.extend({notDupApplyCount:0,dupApplyCount:0,companyGiftData:[],eventWinnerData:[]},f);a.init=function(){a.companyGiftTable=new Horyu.View.CompanyGiftTable;a.companyGiftTable.init();a.updateTable();a.bindEvents();setInterval(function(){$("#currentTime").text(moment().format("YYYY\ub144 MMMM D\uc77c dddd A h\uc2dc mm\ubd84 ss\ucd08"))},500);var c={useEasing:!0,useGrouping:!0,separator:",",decimal:"."},
b=new CountUp("notDupApplyCount",0,a.options.notDupApplyCount,0,3,c);b.error?console.error(b.error):b.start();c=new CountUp("dupApplyCount",0,a.options.dupApplyCount,0,3,c);c.error?console.error(c.error):c.start()};a.updateTable=function(){a.companyGiftTable.updateTable(a.options.companyGiftData,a.options.eventWinnerData);var c=$(".next-gift-alert"),b=$(".next-gift-name"),d=$(".lotteryBtn"),e=a.companyGiftTable.getNextLotteryGift();null===e?(c.remove(),d.attr("disabled",""),d.html('\x3ci class\x3d"fas fa-random"\x3e\x3c/i\x3e\x26nbsp; [\ucd94\ucca8 \ubd88\uac00] \ubaa8\ub4e0 \uc0c1\ud488 \ucd94\ucca8\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.')):
(b.text(e.prizeName),d.html('\x3ci class\x3d"fas fa-random"\x3e\x3c/i\x3e\x26nbsp; \ub2e4\uc74c \uc0c1\ud488 \ucd94\ucca8\ud558\uae30'))};a.bindEvents=function(){$(".lotteryBtn").click(function(){if(a.isIE())$("#ie-modal").modal({backdrop:"static",keyboard:!1});else{$(".lotteryBtn").attr("disabled","");$(".lotteryBtn").html('\x3ci class\x3d"fas fa-spinner fa-pulse"\x3e\x3c/i\x3e\x26nbsp; \ucd94\ucca8 \uc911\uc785\ub2c8\ub2e4...');var c=moment();$.ajax({type:"POST",url:"./lottery",data:{prizeId:a.companyGiftTable.getNextLotteryGift().prizeId},
timeout:12E4}).done(function(b){var d=moment();5E3<=moment.duration(d.diff(c)).valueOf()?a.lotteryOut(b):setTimeout(function(){a.lotteryOut(b)},Math.round(3E3*Math.random())+3E3)}).fail(function(a){$(".lotteryBtn").html('\x3ci class\x3d"fas fa-exclamation-triangle"\x3e\x3c/i\x3e\x26nbsp; \ucd94\ucca8\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.');$(".lotteryBtn").removeClass("btn-success");$(".lotteryBtn").addClass("btn-danger");setTimeout(function(){location.reload()},4E3)})}})};a.lotteryOut=
function(c){$(".lotteryBtn").html("\uc5f4\ub9b0 \ucc3d\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.");var b=a.companyGiftTable.getNextLotteryGift(),d=$("#modal-company-logo");null!==b.companyLogoImageFileName?(d.show(),d.attr("src","/companyLogo?companyId\x3d"+b.companyId)):d.hide();$("#modal-companyName").text(b.companyName);$("#modal-companyDetail").text(b.companyDetail);$("#modal-prizeName").text(b.prizeName);$("#modal-youtubeNickname").text(c.youtubeNickname);$("#modal-email").text(c.applyEmail);
$("#lottery-modal").modal({backdrop:"static",keyboard:!1})};a.isIE=function(){var a=window.navigator.userAgent.toLowerCase();return"netscape"===navigator.appName.toLowerCase()&&-1!==a.search("trident")||-1!==a.indexOf("msie")?!0:!1};return{init:function(){a.init()}}};
//# sourceMappingURL=Horyu.View.Lottery.min.js.map