var Horyu=window.Horyu||{};Horyu.View=window.Horyu.View||{};
Horyu.View.Lottery=function(f){var a=this;a.companyGiftTable=null;a.currentEventWinnerData=[];a.options=$.extend({notDupApplyCount:0,dupApplyCount:0,companyGiftData:[],eventWinnerData:[]},f);a.init=function(){a.companyGiftTable=new Horyu.View.CompanyGiftTable;a.companyGiftTable.init();a.updateTable();a.bindEvents();setInterval(function(){$("#currentTime").text(moment().format("YYYY\ub144 MMMM D\uc77c dddd A h\uc2dc mm\ubd84 ss\ucd08"))},500);var b={useEasing:!0,useGrouping:!0,separator:",",decimal:"."},
c=new CountUp("notDupApplyCount",0,a.options.notDupApplyCount,0,3,b);c.error?console.error(c.error):c.start();b=new CountUp("dupApplyCount",0,a.options.dupApplyCount,0,3,b);b.error?console.error(b.error):b.start();b=a.options.companyGiftData.sum("prizeAmount");b=(a.options.notDupApplyCount/b).toFixed(2);$("#competitionRate").text(b+" : 1")};a.updateTable=function(){a.companyGiftTable.updateTable(a.options.companyGiftData,a.options.eventWinnerData);var b=$(".next-gift-alert"),c=$(".next-gift-name"),
d=$(".lotteryBtn"),e=a.companyGiftTable.getNextLotteryGift();null===e?(b.remove(),d.attr("disabled",""),d.html('\x3ci class\x3d"fas fa-random"\x3e\x3c/i\x3e\x26nbsp; [\ucd94\ucca8 \ubd88\uac00] \ubaa8\ub4e0 \uc0c1\ud488 \ucd94\ucca8\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.')):(c.text(e.prizeName),d.html('\x3ci class\x3d"fas fa-random"\x3e\x3c/i\x3e\x26nbsp; \ub2e4\uc74c \uc0c1\ud488 \ucd94\ucca8\ud558\uae30'))};a.bindEvents=function(){$(".lotteryBtn").click(function(){if(a.isIE())$("#ie-modal").modal({backdrop:"static",
keyboard:!1});else{$(".lotteryBtn").attr("disabled","");$(".lotteryBtn").html('\x3ci class\x3d"fas fa-spinner fa-pulse"\x3e\x3c/i\x3e\x26nbsp; \ucd94\ucca8 \uc911\uc785\ub2c8\ub2e4...');var b=moment();$.ajax({type:"POST",url:"./lottery",data:{prizeId:a.companyGiftTable.getNextLotteryGift().prizeId},timeout:12E4}).done(function(c){if("object"!==typeof c)$(".lotteryBtn").html('\x3ci class\x3d"fas fa-exclamation-triangle"\x3e\x3c/i\x3e\x26nbsp; \ucd94\ucca8\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.'),
$(".lotteryBtn").removeClass("btn-success"),$(".lotteryBtn").addClass("btn-danger"),setTimeout(function(){location.reload()},4E3);else{var d=moment();5E3<=moment.duration(d.diff(b)).valueOf()?a.lotteryOut(c):setTimeout(function(){a.lotteryOut(c)},Math.round(3E3*Math.random())+3E3)}}).fail(function(a){$(".lotteryBtn").html('\x3ci class\x3d"fas fa-exclamation-triangle"\x3e\x3c/i\x3e\x26nbsp; \ucd94\ucca8\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.');$(".lotteryBtn").removeClass("btn-success");
$(".lotteryBtn").addClass("btn-danger");setTimeout(function(){location.reload()},4E3)})}})};a.lotteryOut=function(b){$(".lotteryBtn").html("\uc5f4\ub9b0 \ucc3d\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.");var c=a.companyGiftTable.getNextLotteryGift(),d=$("#modal-company-logo");null!==c.companyLogoImageFileName?(d.show(),d.attr("src","/companyLogo?companyId\x3d"+c.companyId)):d.hide();$("#modal-companyName").text(c.companyName);$("#modal-companyDetail").text(c.companyDetail);$("#modal-prizeName").text(c.prizeName);
$("#modal-youtubeNickname").text(b.youtubeNickname);$("#modal-email").text(b.applyEmail);$("#lottery-modal").modal({backdrop:"static",keyboard:!1})};a.isIE=function(){var a=window.navigator.userAgent.toLowerCase();return"netscape"===navigator.appName.toLowerCase()&&-1!==a.search("trident")||-1!==a.indexOf("msie")?!0:!1};return{init:function(){a.init()}}};
//# sourceMappingURL=Horyu.View.Lottery.min.js.map