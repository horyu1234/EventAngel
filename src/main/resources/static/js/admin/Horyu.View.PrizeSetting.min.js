var Horyu=window.Horyu||{};Horyu.View=window.Horyu.View||{};
Horyu.View.PrizeSetting=function(g){var a=this;a.deletingPrizeId=0;a.options=$.extend({prizeList:[]},g);a.init=function(){a.updateTable();a.bindEvents()};a.bindEvents=function(){$(".prizeEditBtn").click(function(b){a.startPrizeEdit($(b.target))});$(".prizeDeleteBtn").click(function(b){a.startDelete($(b.target))});$("#cancelEditBtn").click(function(){a.abortPrizeEdit()});$("#deleteAbortBtn").click(function(){a.abortDelete()});$("#deleteBtn").click(function(){a.deleteConfirm()})};a.startPrizeEdit=function(a){a=
a.closest("tr");$("#prizeId").val(a.find(".prize-name").attr("data-prize-id"));$("#companyId").val(a.find(".prize-name").attr("data-company-id"));$("#prizeName").val(a.find(".prize-name").text());$("#prizeAmount").val(a.find(".prize-amount").text());$(".card-header").text("\uc0c1\ud488 \uc218\uc815");$("#submitBtn").text("\uc0c1\ud488 \uc218\uc815");$("#cancelEditBtn").css("visibility","visible");$("html, body").animate({scrollTop:0},"fast")};a.abortPrizeEdit=function(){$("#prizeId").val("0");$("#prizeName").val("");
$("#prizeAmount").val("");$(".card-header").text("\uc0c1\ud488 \ucd94\uac00");$("#submitBtn").text("\uc0c1\ud488 \ucd94\uac00");$("#cancelEditBtn").css("visibility","hidden")};a.startDelete=function(b){b=b.closest("tr");a.deletingPrizeId=Number(b.find(".prize-name").attr("data-prize-id"));$("#delete-modal").modal({backdrop:"static",keyboard:!1})};a.abortDelete=function(){a.deletingPrizeId=0};a.deleteConfirm=function(){$("#deleteBtn").html("\ucc98\ub9ac \uc911\uc785\ub2c8\ub2e4.");$("#deleteBtn").attr("disabled",
"");$("#deleteAbortBtn").css("visibility","hidden");$.ajax({type:"POST",url:"./deletePrize",data:{prizeId:a.deletingPrizeId},timeout:5E3}).done(function(){$("#deleteBtn").html("\uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");setTimeout(function(){location.reload()},500)}).fail(function(a){$("#deleteBtn").html("\ud1b5\uc2e0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");setTimeout(function(){location.reload()},3E3)})};a.updateTable=
function(){var b=$("#prize-table tbody");b.empty();var d=a.options.prizeList.groupBy("companyId");Object.forEach(d,function(c){c=c.sortBy("prizeId");var d=0;Object.forEach(c,function(f){var e=$("\x3ctr\x3e");0===d&&e.append(a.makeCompanyCell(c.length,f));e.append($('\x3ctd class\x3d"prize-name"\x3e').attr("data-prize-id",f.prizeId).attr("data-company-id",f.companyId).text(f.prizeName));e.append($('\x3ctd class\x3d"prize-amount"\x3e').text(f.prizeAmount));e.append($('\x3ctd\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-info btn-sm prizeEditBtn"\x3e\uc218\uc815\x3c/button\x3e\x3c/td\x3e'));
e.append($('\x3ctd\x3e\x3cbutton type\x3d"button" class\x3d"btn btn-danger btn-sm prizeDeleteBtn"\x3e\uc0ad\uc81c\x3c/button\x3e\x3c/td\x3e'));b.append(e);d++})})};a.makeCompanyCell=function(a,d){var c=$('\x3ctd class\x3d"company-cell"\x3e').attr("rowspan",a),g=$('\x3cimg class\x3d"company-logo" src\x3d"/companyLogo?companyId\x3d'+d.companyId+'"/\x3e'),f=$('\x3ca style\x3d"font-size: 16pt;font-weight: bold;"\x3e'+d.companyName+"\x3c/a\x3e"),e=$('\x3ca style\x3d"color: gray"\x3e'+d.companyDetail+"\x3c/a\x3e");
null!==d.companyLogoImageFileName?c.append(g):c.append(f);c.append("\x3cbr/\x3e");c.append(e);return c};return{init:function(){a.init()}}};
//# sourceMappingURL=Horyu.View.PrizeSetting.min.js.map