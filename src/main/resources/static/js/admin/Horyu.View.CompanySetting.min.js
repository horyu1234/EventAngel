var Horyu=window.Horyu||{};Horyu.View=window.Horyu.View||{};
Horyu.View.CompanySetting=function(){var a=this;a.deletingCompanyId=0;a.init=function(){a.bindEvents()};a.bindEvents=function(){$(".companyEditBtn").click(function(c){a.startCompanyEdit($(c.target))});$(".companyDeleteBtn").click(function(c){a.startDelete($(c.target))});$("#cancelEditBtn").click(function(){a.abortCompanyEdit()});$("#deleteAbortBtn").click(function(){a.abortDelete()});$("#deleteBtn").click(function(){a.deleteConfirm()});$("#companyLogoFile").on("change",function(){var c=$(this).next(".custom-file-label"),
b=$(this)[0].files;0===b.length?a.resetImageInput():(b=b[0],console.log("file changed",b),b.type.startsWith("image/")?5242880<=b.size?($("#warning-modal-text").text("\ucd5c\ub300 5MB \ubbf8\ub9cc\uc758 \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),$("#warning-modal").modal(),a.resetImageInput()):(c.text(b.name),a.previewCompanyLogo(b)):($("#warning-modal-text").text("\uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc120\ud0dd\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),
$("#warning-modal").modal(),a.resetImageInput()))})};a.resetImageInput=function(){$("#companyLogoFile").next(".custom-file-label").text("\ud68c\uc0ac \ub85c\uace0 \uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");$("#companyLogoPreview").attr("src","")};a.previewCompanyLogo=function(a){var b=new FileReader;b.onload=function(a){$("#companyLogoPreview").attr("src",a.target.result)};b.readAsDataURL(a)};a.startCompanyEdit=function(a){a=a.closest("tr");$("#companyId").val(a.find(".company-id").text());
$("#companyName").val(a.find(".company-name").text());$("#companyDetail").val(a.find(".company-detail").text());$(".card-header").text("\ub3c4\uc6c0\uc744 \uc8fc\uc2e0 \ud68c\uc0ac \uc218\uc815");$("#submitBtn").text("\ud68c\uc0ac \uc218\uc815");$("#cancelEditBtn").css("visibility","visible");$(".companyLogoFormInput").hide();$("html, body").animate({scrollTop:0},"fast")};a.abortCompanyEdit=function(){$("#companyId").val("0");$("#companyName").val("");$("#companyDetail").val("");$(".card-header").text("\ub3c4\uc6c0\uc744 \uc8fc\uc2e0 \ud68c\uc0ac \ucd94\uac00");
$("#submitBtn").text("\ud68c\uc0ac \ucd94\uac00");$("#cancelEditBtn").css("visibility","hidden");$(".companyLogoFormInput").show()};a.startDelete=function(c){c=c.closest("tr");a.deletingCompanyId=Number(c.find(".company-id").text());$("#delete-modal").modal({backdrop:"static",keyboard:!1})};a.abortDelete=function(){a.deletingCompanyId=0};a.deleteConfirm=function(){$("#deleteBtn").html("\ucc98\ub9ac \uc911\uc785\ub2c8\ub2e4.");$("#deleteBtn").attr("disabled","");$("#deleteAbortBtn").css("visibility",
"hidden");$.ajax({type:"POST",url:"./deleteCompany",data:{companyId:a.deletingCompanyId},timeout:5E3}).done(function(){$("#deleteBtn").html("\uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");setTimeout(function(){location.reload()},500)}).fail(function(a){$("#deleteBtn").html("\ud1b5\uc2e0\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");setTimeout(function(){location.reload()},3E3)})};return{init:function(){a.init()}}};
//# sourceMappingURL=Horyu.View.CompanySetting.min.js.map